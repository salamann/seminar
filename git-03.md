# Gitを使ってみよう(その４) - ブランチ

## 今日やること

* フィーチャーブランチを作る
* ブランチのマージ

## ブランチの作成

master ブランチから分岐してブランチを作ってみましょう。

```
$ git checkout master
$ git checkout -b bufix-0123
```

最初に master をチェックアウトしているのは、ブランチの分岐元をはっきりさせるためです。これをしないと、たまたま現在作業中だったブランチから分岐してしまいます。

bugfix-0123 は作成するブランチの名前です。
チケット番号0123のバグを直すというようなつもりでつけました。
新機能の実装用ブランチであれば feature-??? のような名前をつけるといいかもしれません。

ブランチを作ったら、ファイルの編集や追加などして、コミットしてみましょう。

```
$ git add 編集or追加したファイル名
$ git commit -m "バグ#0123を修正"
```

## ブランチのコミットをマージする

ブランチでの作業(バグ修正や機能実装)が終了したら、成果をマージしましょう。

```
git checkout master
git pull
git merge bugfix-0123
```

マージの前に、マージ先をチェックアウトして、さらに pull しています。これは、共有リポジトリに他の開発者の行ったコミットが追加されているかもしれないからです。

```
git pull 前
                  master
                  v
リモート A--B--C--D

            master
            v
ローカル A--B
             \
               X--Y
                  ^
                  bugfix-0123
```

git pull で共有リポジトリの変更を取り込むと、次のような状態になります。

```
git pull 後
                  master
                  v
リモート A--B--C--D

                  master
                  v
ローカル A--B--C--D
             \
               X--Y
                  ^
                  bugfix-0123
```

そして git merge します。

```
git merge 後
                  master
                  v
リモート A--B--C--D

                     master
                     v
ローカル A--B--C--D--E
             \      /
               X--Y
                  ^
                  bugfix-0123
```

git push して共有リポジトリに自分の変更を反映させます。

```
git push 後
                     master
                     v
リモート A--B--C--D--E
             \      /
               X--Y

                     master
                     v
ローカル A--B--C--D--E
             \      /
               X--Y
                  ^
                  bugfix-0123
```

bugfix-0123 というブランチ自体は共有リポジトリには伝わりませんが、ブランチで行ったコミットは伝わります。
ブランチはコミットYについた印にすぎません。共有する必要がなければ共有リポジトリに伝える必要はないのです。
もちろん、共有したいブランチであれば伝えることもできます。

##
